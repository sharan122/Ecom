{% extends "user_base/user_base.html" %}
{% load static %}

{% block user_base %}
{% for item in items %}
<!-- Container for order details -->
<div class="container mb-5  p-5 ">
<h4 class="card-title ">Order Details</h4>
<p>Ordered on {{item.order_id.created_at.date}} | <strong>OrderID# {{item.id}}</strong></p>

<!-- Container for product details -->
<div class="container-fluid mt-3 mx-auto mb-4">
    <div class="card">
        <div class="card-body">
            <div class="row">
                <!-- Product Image -->
                <div class="col-sm-4 col-md-2">
                    <img src="{{item.product_id.image1.url}}" class="img-fluid" alt="Product Image">
                </div>
                <!-- Product Information -->
                <div class="col-sm-8 col-md-10">
                    <h5>{{item.product_id.p_id.name}}</h5>
                    <p>Color: {{item.product_id.color}}<br>Quantity : <span style="color: rgb(248, 10, 10); font-weight:900;">{{item.qty}}</span></p>
                    <h4>₹ {{item.total_price}}/-</h4>
                    {% comment %} <p class="text-success">1 Offer & 1 Coupon Applied</p> {% endcomment %}


                    <div class="d-flex justify-content-between align-items-center">
                        {% if item.status == "Order Placed" %}
                        <p class="text-success mb-0">{{item.status}} </p>
                       
                        
                    </div>
                    <div class="progress my-2" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 20%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                        {% endif %}


                    {% if item.status == "Order Cancelled !" %}
                        <h6 class="text-danger mb-0">{{item.status}} </h6>
                    </div>
                    <div class="progress my-2" style="height: 6px;">
                        <div class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    {% endif %}

                    {% if item.status == "Delivered" %}
                        <h6 class="text-success mb-0">{{item.status}} </h6>
                    </div>
                    <div class="progress my-2" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    {% endif %}
                    {% if item.status == "Shipped" %}
                        <h6 class="text-success mb-0">{{item.status}} </h6>
                    </div>
                    <div class="progress my-2" style="height: 6px;">
                        <div class="progress-bar bg-success" role="progressbar" style="width: 50%;" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    {% endif %}



                    


                    
                    <div class="text-end mt-2">
                        {% if item.status != "Order Cancelled !" %}<a href="{% url 'Order:cancel_order' item.id %}" class="btn btn-outline-danger btn-sm">Cancel</a>{% endif %}
                        <button class="btn btn-outline-primary btn-sm">Chat with us</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>




    <!-- Row for shipping address, payment methods, and order summary -->
    <div class="row">
        <!-- Shipping Address -->
        <div class="col-md-4 mb-3">
            <div class="card h-100">
                <div class="card-body">
                    <h6>Shipping Address</h6>
                    <p class="mb-0">{{item.order_id.address_id.name}}</p>
                  
                    <p class="mb-0">{{item.order_id.address_id.address}}</p>
                    <p class="mb-0">{{item.order_id.address_id.city}}, {{item.order_id.address_id.state}} {{item.order_id.address_id.pincode}}</p>
                    <p>India</p>
                </div>
            </div>
        </div>
        <!-- Payment Methods -->
        <div class="col-md-3 mb-3">
            <div class="card h-100">
                <div class="card-body">
                    <h6>Payment Methods</h6>
                    {% if item.order_id.payment_type == "COD" %}
                    <p>Pay on Delivery</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <!-- Order Summary -->
        <div class="col-md-5 mb-3">
            <div class="card h-100">
                <div class="card-body">
                    <h6>Order Summary</h6>
                    <p class="mb-1">Item Price: <span class="float-end">₹ {{item.product_id.price}}</span></p>
                    <p class="mb-1">Quantity : <span class="float-end">{{item.qty}}</span></p>
                   
                    <hr>
                    <p class="mb-1">Total: <span class="float-end">₹ {{item.total_price}}</span></p>
                    {% comment %} <p class="mb-1">Promotion Applied: <span class="float-end">-₹40.00</span></p> {% endcomment %}
                    <hr>
                    {% comment %} <p class="mb-1"><strong>Grand Total: <span class="float-end">₹899.00</span></strong></p> {% endcomment %}
                    <p class="mb-0 text-success"><strong>Grand Total : <span class="float-end">₹ {{item.total_price}}</span></strong></p>
                </div>
            </div>
        </div>
    </div>

</div>
{% endfor %}
{% endblock %}
